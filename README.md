# Shopping Bot

Бот для мониторинга наличия товаров в онлайн-магазинах и отправки уведомлений при их появлении.

## Функциональность

- Мониторинг товаров в интернет-магазинах (Zara, Massimo Dutti и др.)
- Проверка наличия товаров по заданным размерам
- Отправка уведомлений по электронной почте
- Сохранение скриншотов для визуального подтверждения
- Веб-интерфейс для мониторинга статуса товаров
- Защита от обнаружения ботов

## Установка

### С использованием Docker (рекомендуется)

1. Клонируйте репозиторий:
```
git clone https://github.com/your-username/shopping-bot.git
cd shopping-bot
```

2. Создайте .env файл на основе .env.example:
```
cp .env.example .env
```

3. Отредактируйте .env файл, указав ваши учетные данные и настройки.

4. Запустите контейнеры:
```
docker-compose -f docker-compose.development.yml up -d
```

### Локальная установка

1. Клонируйте репозиторий:
```
git clone https://github.com/your-username/shopping-bot.git
cd shopping-bot
```

2. Установите зависимости:
```
npm install
```

3. Создайте и настройте .env файл:
```
cp .env.example .env
```

4. Запустите бот:
```
npm start
```

## Настройка

### Конфигурация магазинов

Настройка магазинов производится в файле `config/default.js`. Вы можете добавить новые магазины по образцу существующих.

### Добавление товаров для мониторинга

В файле `config/default.js` найдите раздел `targetItems` и добавьте товары по образцу:

```javascript
{
  shop: 'Zara', // Название магазина
  name: 'Название товара', // Для отображения в уведомлениях
  productId: 'path/to/product', // Путь к товару после домена
  sizes: ['XS', 'S', 'M'], // Интересующие размеры
  maxPrice: 1500, // Максимальная цена
  autoPurchase: false // Автоматическая покупка (не реализовано)
}
```

### Расписание проверок

Расписание проверок настраивается через переменную `CHECK_INTERVAL` в .env файле. Используется формат CRON.

Примеры:
- `*/30 * * * *` - каждые 30 минут
- `0 */4 * * *` - каждые 4 часа (в 0:00, 4:00, 8:00 и т.д.)
- `0 8,20 * * *` - два раза в день (в 8:00 и 20:00)

## Решение проблем

### Timeout Connection

Если бот получает ошибки типа "connection timeout", это может быть связано с защитой сайта от ботов. Попробуйте следующие решения:

1. Увеличьте интервал между проверками в .env файле
2. Настройте использование прокси (см. proxy-installation.md)
3. Проверьте наличие Chrome в контейнере Docker

### Ошибки авторизации электронной почты

Если вы видите ошибки авторизации почты, убедитесь, что:

1. Вы указали правильные учетные данные в .env файле
2. Для Gmail: включен доступ для менее защищенных приложений или использован аппаратный ключ

## Безопасность

- Не публикуйте ваш .env файл или учетные данные
- Рекомендуется использовать отдельный email для работы бота
- Соблюдайте ограничения сайтов на частоту запросов

## Лицензия

MIT
