# Получение и настройка API ключа OpenAI

## Проблема с текущим API ключом

В вашем файле `.env` указан API ключ, который начинается с `sk-proj-`. Это формат ключа проекта, а не секретного ключа API, который требуется для использования OpenAI API.

## Как получить правильный API ключ

1. Перейдите на сайт [OpenAI Platform](https://platform.openai.com/api-keys)
2. Войдите в свой аккаунт или создайте новый
3. Нажмите на кнопку "Create new secret key"
4. Дайте ключу название (например, "Shopping Bot")
5. Скопируйте сгенерированный ключ (он будет начинаться с `sk-` без префикса `proj-`)

## Настройка API ключа в проекте

1. Откройте файл `.env` в корне проекта
2. Найдите строку с `OPENAI_API_KEY=`
3. Замените текущее значение на ваш новый API ключ:

```
OPENAI_API_KEY=sk-ваш_новый_ключ
```

## Проверка API ключа

Чтобы проверить, что ваш API ключ работает правильно:

1. Запустите бот с помощью команды:
   ```bash
   npm start
   ```

2. Проверьте логи на наличие ошибок аутентификации:
   ```bash
   tail -f logs/error.log
   ```

## Возможные ошибки и их решения

### "Request failed with status code 404"

Эта ошибка может означать, что:
- URL API неверный
- Формат запроса неправильный
- API ключ имеет неправильный формат

### "Request failed with status code 401"

Эта ошибка означает, что ваш API ключ недействителен или истек срок его действия.

### "Request failed with status code 429"

Эта ошибка означает, что вы превысили лимит запросов к API. Проверьте ваш тарифный план и лимиты на [странице использования](https://platform.openai.com/usage).

## Использование мок-анализа для разработки

Если у вас нет API ключа OpenAI или вы хотите сэкономить на запросах во время разработки, вы можете использовать мок-анализ:

1. Закомментируйте или удалите строку `OPENAI_API_KEY=` в файле `.env`
2. Запустите бот - он автоматически переключится на мок-анализ
3. В логах вы увидите сообщение: "OpenAI API key not configured, using mock analysis" 